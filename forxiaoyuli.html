<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>yufushan ğŸ’— lilingling </title>
    <style type="text/css">
      body {
        margin: 0;
        overflow: hidden;
        background: #000;
      }
      canvas {
        position: absolute;
        width: 100%;
        height: 100%;
      }
      #pinkboard {
        animation: anim 1.5s ease-in-out infinite;
        -webkit-animation: anim 1.5s ease-in-out infinite;
        -o-animation: anim 1.5s ease-in-out infinite;
        -moz-animation: anim 1.5s ease-in-out infinite;
      }
      @keyframes anim {
        0% {
          transform: scale(0.8);
        }
        25% {
          transform: scale(0.7);
        }
        50% {
          transform: scale(1);
        }
        75% {
          transform: scale(0.7);
        }
        100% {
          transform: scale(0.8);
        }
      }
      @-webkit-keyframes anim {
        0% {
          -webkit-transform: scale(0.8);
        }
        25% {
          -webkit-transform: scale(0.7);
        }
        50% {
          -webkit-transform: scale(1);
        }
        75% {
          -webkit-transform: scale(0.7);
        }
        100% {
          -webkit-transform: scale(0.8);
        }
      }
      @-o-keyframes anim {
        0% {
          -o-transform: scale(0.8);
        }
        25% {
          -o-transform: scale(0.7);
        }
        50% {
          -o-transform: scale(1);
        }
        75% {
          -o-transform: scale(0.7);
        }
        100% {
          -o-transform: scale(0.8);
        }
      }
      @-moz-keyframes anim {
        0% {
          -moz-transform: scale(0.8);
        }
        25% {
          -moz-transform: scale(0.7);
        }
        50% {
          -moz-transform: scale(1);
        }
        75% {
          -moz-transform: scale(0.7);
        }
        100% {
          -moz-transform: scale(0.8);
        }
      }
      #name {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        margin-top: -20px;
        font-size: 46px;
        color: #ea80b0;
      }
    </style>
  </head>
  <body>
      <canvas id="pinkboard"></canvas>
      <div id="name">I LOVE U</div>
      <script>
          let audio = document.createElement("audio");
          audio.src = "http://music.163.com/song/media/outer/url?id=1855555967.mp3";
          audio.loop = true;
          audio.volume = 0.6;
          window.onclick = function () {
              audio.play();
          }
      </script>
      <canvas id="canvas"></canvas>
      <canvas id="stars"></canvas>
      <script type="text/javascript">
          const colors = [
              "#eec996",
              "#96c1de",
              "#b7d4c6",
              "#c3bedd",
              "#f1d5e4",
              "#cae1d3",
              "#f3c89d",
              "#d0b0c3",
              "#819d53",
              "#c99294",
              "#E0A0B1",
              "#ff8e70",
              "#726DC3",
              "#B994ED",
              "#EF9EC3",
              "#e8c6c0",
              "#dc9898",
              "#ecc8ba",
          ]; //ç”¨æ¥è®¾ç½®çš„é¢œè‰²
          var canvas = document.getElementById("canvas");
          var ctx = canvas.getContext("2d");
          let count = 1;

          var ww = window.innerWidth;
          var wh = window.innerHeight;

          var hearts = [];

          function init() {
              requestAnimationFrame(render);
              canvas.width = ww;
              canvas.height = wh;
              for (var i = 0; i < 100; i++) {
                  hearts.push(new Heart());
              }
          }

          function Heart() {
              this.x = Math.random() * ww;
              this.y = Math.random() * wh;
              this.opacity = Math.random() * 0.5 + 0.5;
              this.vel = {
                  x: (Math.random() - 0.5) * 4,
                  y: (Math.random() - 0.5) * 4,
              };
              this.targetScale = Math.random() * 0.15 + 0.02;
              this.scale = this.targetScale * Math.random();
          }

          Heart.prototype.update = function (i) {
              this.x += this.vel.x;
              this.y += this.vel.y;

              this.scale += (this.targetScale - this.scale) * 0.01;
              if (this.x - this.width > ww || this.x + this.width < 0) {
                  this.scale = 0;
                  this.x = Math.random() * ww;
              }
              if (this.y - this.height > wh || this.y + this.height < 0) {
                  this.scale = 0;
                  this.y = Math.random() * wh;
              }
              this.width = 473.8;
              this.height = 408.6;
          };
          Heart.prototype.draw = function (i) {
              ctx.globalAlpha = this.opacity;
              ctx.font = `${180 * this.scale}px "å¾®è½¯é›…é»‘"`;
              // ctx.font="20px";
              ctx.fillStyle = colors[i % 18];
              ctx.fillText(
                  "æç²ç²",
                  this.x - this.width * 0.5,
                  this.y - this.height * 0.5,
                  this.width,
                  this.height
              );
              // ctx.drawImage(
              //   heartImage,
              //   this.x - this.width * 0.5,
              //   this.y - this.height * 0.5,
              //   this.width,
              //   this.height
              // );
          };

          function render() {
              ctx.clearRect(0, 0, ww, wh);
              // ctx.globalAlpha = 1;
              // ctx.fillStyle = "rgba(255,255,255,0.3)";
              // ctx.fillRect(0, 0, ww, wh);
              for (var i = 0; i < 100; i++) {
                  hearts[i].update(i);
                  hearts[i].draw(i);
              }
              requestAnimationFrame(render);
          }
          init();

          // var heartImage = new Image();
          // heartImage.onload = init();
          // heartImage.src =
          //   "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NzMuOHB4IiBoZWlnaHQ9IjQwOC42cHgiIHZpZXdCb3g9IjAgMCA0NzMuOCA0MDguNiI+PHBhdGggZmlsbD0iI2QzMjkzMiIgZD0iTTQwNC42LDE2LjZDMzg1LjQsNi4xLDM2My41LDAsMzQwLDBjLTQxLjUsMC03OC41LDE4LjktMTAzLDQ4LjVDMjEyLjMsMTguOSwxNzUuMywwLDEzMy44LDAgYy0yMy4zLDAtNDUuMyw2LjEtNjQuNSwxNi42QzI3LjksMzkuNSwwLDgzLjQsMCwxMzMuOWMwLDE0LjQsMi40LDI4LjMsNi42LDQxLjJDMjkuNiwyNzguNCwyMzcsNDA4LjYsMjM3LDQwOC42IHMyMDcuMi0xMzAuMiwyMzAuMi0yMzMuNWM0LjMtMTIuOSw2LjYtMjYuOCw2LjYtNDEuMkM0NzMuOCw4My40LDQ0NS45LDM5LjYsNDA0LjYsMTYuNnoiLz48L3N2Zz4=";

          window.addEventListener("resize", function () {
              ww = window.innerWidth;
              wh = window.innerHeight;
          });
      </script>
      <script>
          var context;

          var arr = new Array();
          var starCount = 800;

          var rains = new Array();
          var rainCount = 20;

          //åˆå§‹åŒ–ç”»å¸ƒåŠcontext
          function init() {
              //è·å–canvas
              var stars = document.getElementById("stars");
              windowWidth = window.innerWidth; //å½“å‰çš„çª—å£çš„é«˜åº¦
              stars.width = windowWidth;
              stars.height = window.innerHeight;
              //è·å–context
              context = stars.getContext("2d");
          }

          //åˆ›å»ºä¸€ä¸ªæ˜Ÿæ˜Ÿå¯¹è±¡
          var Star = function () {
              this.x = windowWidth * Math.random();//æ¨ªåæ ‡
              this.y = 5000 * Math.random();//çºµåæ ‡
              this.text = "â¤";//æ–‡æœ¬
              this.color = "#ea80b0";//é¢œè‰²

              //äº§ç”Ÿéšæœºé¢œè‰²
              this.getColor = function () {

                  var _r = Math.random();

                  if (_r < 0.5) {
                      this.color = "#333";
                  } else {
                      this.color = "#ea80b0";
                  }

              }

              //åˆå§‹åŒ–
              this.init = function () {
                  this.getColor();
              }
              //ç»˜åˆ¶
              this.draw = function () {
                  context.fillStyle = this.color;
                  context.fillText(this.text, this.x, this.y);
              }

          }


          //é¡µé¢åŠ è½½çš„æ—¶å€™
          window.onload = function () {

              init();
              //ç”»æ˜Ÿæ˜Ÿ
              for (var i = 0; i < starCount; i++) {
                  var star = new Star();
                  star.init();
                  star.draw();
                  arr.push(star);
              }

              //ç”»æµæ˜Ÿ
              for (var i = 0; i < rainCount; i++) {
                  var rain = new MeteorRain();
                  rain.init();
                  rain.draw();
                  rains.push(rain);
              }

              playStars();//ç»˜åˆ¶é—ªåŠ¨çš„æ˜Ÿæ˜Ÿ
              playRains();//ç»˜åˆ¶æµæ˜Ÿ


          }

          //æ˜Ÿæ˜Ÿé—ªèµ·æ¥
          function playStars() {
              for (var n = 0; n < starCount; n++) {
                  arr[n].getColor();
                  arr[n].draw();
              }

              setTimeout("playStars()", 100);
          }

          var MeteorRain = function () {
              this.x = -1;
              this.y = -1;
              this.length = -1;//é•¿åº¦
              this.angle = 30; //å€¾æ–œè§’åº¦
              this.width = -1;//å®½åº¦
              this.height = -1;//é«˜åº¦
              this.speed = 1;//é€Ÿåº¦
              this.offset_x = -1;//æ¨ªè½´ç§»åŠ¨åç§»é‡
              this.offset_y = -1;//çºµè½´ç§»åŠ¨åç§»é‡
              this.alpha = 1; //é€æ˜åº¦
              this.color1 = "#ea80b0";//æµæ˜Ÿçš„è‰²å½©
              this.color2 = "";  //æµæ˜Ÿçš„è‰²å½©

              this.init = function () //åˆå§‹åŒ–
              {
                  this.getPos();
                  this.alpha = 1;//é€æ˜åº¦
                  this.getRandomColor();
                  //æœ€å°é•¿åº¦ï¼Œæœ€å¤§é•¿åº¦
                  var x = Math.random() * 80 + 150;
                  this.length = Math.ceil(x);
                  //                  x = Math.random()*10+30;
                  this.angle = 30; //æµæ˜Ÿå€¾æ–œè§’
                  x = Math.random() + 0.5;
                  this.speed = Math.ceil(x); //æµæ˜Ÿçš„é€Ÿåº¦
                  var cos = Math.cos(this.angle * 3.14 / 180);
                  var sin = Math.sin(this.angle * 3.14 / 180);
                  this.width = this.length * cos;  //æµæ˜Ÿæ‰€å å®½åº¦
                  this.height = this.length * sin;//æµæ˜Ÿæ‰€å é«˜åº¦
                  this.offset_x = this.speed * cos;
                  this.offset_y = this.speed * sin;
              }


              this.getRandomColor = function () {
                  var a = Math.ceil(255 - 240 * Math.random());
                  //ä¸­æ®µé¢œè‰²
                  this.color1 = "rgba(" + a + "," + a + "," + a + ",1)";
                  //ç»“æŸé¢œè‰²
                  this.color2 = "black";
              }

              this.countPos = function ()//
              {
                  //å¾€å·¦ä¸‹ç§»åŠ¨,xå‡å°‘ï¼Œyå¢åŠ 
                  this.x = this.x - this.offset_x;
                  this.y = this.y + this.offset_y;
              }

              this.getPos = function () //
              {
                  //æ¨ªåæ ‡200--1200

                  this.x = Math.random() * window.innerWidth; //çª—å£é«˜åº¦
                  //çºµåæ ‡å°äº600
                  this.y = Math.random() * window.innerHeight;  //çª—å£å®½åº¦
              }
              this.draw = function () //ç»˜åˆ¶ä¸€ä¸ªæµæ˜Ÿçš„å‡½æ•°
              {
                  context.save();
                  context.beginPath();
                  context.lineWidth = 1; //å®½åº¦
                  context.globalAlpha = this.alpha; //è®¾ç½®é€æ˜åº¦
                  //åˆ›å»ºæ¨ªå‘æ¸å˜é¢œè‰²,èµ·ç‚¹åæ ‡è‡³ç»ˆç‚¹åæ ‡
                  var line = context.createLinearGradient(this.x, this.y,
                      this.x + this.width,
                      this.y - this.height);



                  //åˆ†æ®µè®¾ç½®é¢œè‰²
                  line.addColorStop(0, "#87B3F0");
                  line.addColorStop(0.3, "#ea80b0");
                  line.addColorStop(0.6, this.color2);
                  context.strokeStyle = line;
                  //èµ·ç‚¹
                  context.moveTo(this.x, this.y);
                  //ç»ˆç‚¹
                  context.lineTo(this.x + this.width, this.y - this.height);
                  context.closePath();
                  context.stroke();
                  context.restore();
              }
              this.move = function () {
                  //æ¸…ç©ºæµæ˜Ÿåƒç´ 
                  var x = this.x + this.width - this.offset_x;
                  var y = this.y - this.height;
                  context.clearRect(x - 3, y - 3, this.offset_x + 5, this.offset_y + 5);
                  //                  context.strokeStyle="red";
                  //                  context.strokeRect(x,y-1,this.offset_x+1,this.offset_y+1);
                  //é‡æ–°è®¡ç®—ä½ç½®ï¼Œå¾€å·¦ä¸‹ç§»åŠ¨
                  this.countPos();
                  //é€æ˜åº¦å¢åŠ 
                  this.alpha -= 0.002;
                  //é‡ç»˜
                  this.draw();
              }

          }

          //ç»˜åˆ¶æµæ˜Ÿ
          function playRains() {

              for (var n = 0; n < rainCount; n++) {
                  var rain = rains[n];
                  rain.move();//ç§»åŠ¨
                  if (rain.y > window.innerHeight) {//è¶…å‡ºç•Œé™åé‡æ¥
                      context.clearRect(rain.x, rain.y - rain.height, rain.width, rain.height);
                      rains[n] = new MeteorRain();
                      rains[n].init();
                  }
              }
              setTimeout("playRains()", 2);
          }
      </script>


      <script>
          /*
           * Settings
           */
          var settings = {
              particles: {
                  length: 500, // maximum amount of particles
                  duration: 2, // particle duration in sec
                  velocity: 100, // particle velocity in pixels/sec
                  effect: -0.75, // play with this for a nice effect
                  size: 30, // particle size in pixels
              },
          };

          /*
           * RequestAnimationFrame polyfill by Erik M?ller
           */
          (function () {
              var b = 0;
              var c = ["ms", "moz", "webkit", "o"];
              for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {
                  window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"];
                  window.cancelAnimationFrame =
                      window[c[a] + "CancelAnimationFrame"] ||
                      window[c[a] + "CancelRequestAnimationFrame"];
              }
              if (!window.requestAnimationFrame) {
                  window.requestAnimationFrame = function (h, e) {
                      var d = new Date().getTime();
                      var f = Math.max(0, 16 - (d - b));
                      var g = window.setTimeout(function () {
                          h(d + f);
                      }, f);
                      b = d + f;
                      return g;
                  };
              }
              if (!window.cancelAnimationFrame) {
                  window.cancelAnimationFrame = function (d) {
                      clearTimeout(d);
                  };
              }
          })();

          /*
           * Point class
           */
          var Point = (function () {
              function Point(x, y) {
                  this.x = typeof x !== "undefined" ? x : 0;
                  this.y = typeof y !== "undefined" ? y : 0;
              }
              Point.prototype.clone = function () {
                  return new Point(this.x, this.y);
              };
              Point.prototype.length = function (length) {
                  if (typeof length == "undefined")
                      return Math.sqrt(this.x * this.x + this.y * this.y);
                  this.normalize();
                  this.x *= length;
                  this.y *= length;
                  return this;
              };
              Point.prototype.normalize = function () {
                  var length = this.length();
                  this.x /= length;
                  this.y /= length;
                  return this;
              };
              return Point;
          })();

          /*
           * Particle class
           */

          var Particle = (function () {
              function Particle() {
                  this.position = new Point();
                  this.velocity = new Point();
                  this.acceleration = new Point();
                  this.age = 0;
              }
              Particle.prototype.initialize = function (x, y, dx, dy) {
                  this.position.x = x;
                  this.position.y = y;
                  this.velocity.x = dx;
                  this.velocity.y = dy;
                  this.acceleration.x = dx * settings.particles.effect;
                  this.acceleration.y = dy * settings.particles.effect;
                  this.age = 0;
              };
              Particle.prototype.update = function (deltaTime) {
                  this.position.x += this.velocity.x * deltaTime;
                  this.position.y += this.velocity.y * deltaTime;
                  this.velocity.x += this.acceleration.x * deltaTime;
                  this.velocity.y += this.acceleration.y * deltaTime;
                  this.age += deltaTime;
              };
              Particle.prototype.draw = function (context, image) {
                  function ease(t) {
                      return --t * t * t + 1;
                  }
                  var size = image.width * ease(this.age / settings.particles.duration);
                  context.globalAlpha = 1 - this.age / settings.particles.duration;
                  context.drawImage(
                      image,
                      this.position.x - size / 2,
                      this.position.y - size / 2,
                      size,
                      size
                  );
              };
              return Particle;
          })();

          /*
           * ParticlePool class
           */
          var ParticlePool = (function () {
              var particles,
                  firstActive = 0,
                  firstFree = 0,
                  duration = settings.particles.duration;

              function ParticlePool(length) {
                  // create and populate particle pool
                  particles = new Array(length);
                  for (var i = 0; i < particles.length; i++)
                      particles[i] = new Particle();
              }
              ParticlePool.prototype.add = function (x, y, dx, dy) {
                  particles[firstFree].initialize(x, y, dx, dy);

                  // handle circular queue
                  firstFree++;
                  if (firstFree == particles.length) firstFree = 0;
                  if (firstActive == firstFree) firstActive++;
                  if (firstActive == particles.length) firstActive = 0;
              };
              ParticlePool.prototype.update = function (deltaTime) {
                  var i;

                  // update active particles
                  if (firstActive < firstFree) {
                      for (i = firstActive; i < firstFree; i++)
                          particles[i].update(deltaTime);
                  }
                  if (firstFree < firstActive) {
                      for (i = firstActive; i < particles.length; i++)
                          particles[i].update(deltaTime);
                      for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);
                  }

                  // remove inactive particles
                  while (
                      particles[firstActive].age >= duration &&
                      firstActive != firstFree
                  ) {
                      firstActive++;
                      if (firstActive == particles.length) firstActive = 0;
                  }
              };
              ParticlePool.prototype.draw = function (context, image) {
                  // draw active particles
                  if (firstActive < firstFree) {
                      for (i = firstActive; i < firstFree; i++)
                          particles[i].draw(context, image);
                  }
                  if (firstFree < firstActive) {
                      for (i = firstActive; i < particles.length; i++)
                          particles[i].draw(context, image);
                      for (i = 0; i < firstFree; i++) particles[i].draw(context, image);
                  }
              };
              return ParticlePool;
          })();

          /*
           * Putting it all together
           */
          (function (canvas) {
              var context = canvas.getContext("2d"),
                  particles = new ParticlePool(settings.particles.length),
                  particleRate =
                      settings.particles.length / settings.particles.duration, // particles/sec
                  time;

              // get point on heart with -PI <= t <= PI
              function pointOnHeart(t) {
                  return new Point(
                      160 * Math.pow(Math.sin(t), 3),
                      130 * Math.cos(t) -
                      50 * Math.cos(2 * t) -
                      20 * Math.cos(3 * t) -
                      10 * Math.cos(4 * t) +
                      25
                  );
              }

              // creating the particle image using a dummy canvas
              var image = (function () {
                  var canvas = document.createElement("canvas"),
                      context = canvas.getContext("2d");
                  canvas.width = settings.particles.size;
                  canvas.height = settings.particles.size;
                  // helper function to create the path
                  function to(t) {
                      var point = pointOnHeart(t);
                      point.x =
                          settings.particles.size / 2 +
                          (point.x * settings.particles.size) / 350;
                      point.y =
                          settings.particles.size / 2 -
                          (point.y * settings.particles.size) / 350;
                      return point;
                  }
                  // create the path
                  context.beginPath();
                  var t = -Math.PI;
                  var point = to(t);
                  context.moveTo(point.x, point.y);
                  while (t < Math.PI) {
                      t += 0.01; // baby steps!
                      point = to(t);
                      context.lineTo(point.x, point.y);
                  }
                  context.closePath();
                  // create the fill
                  context.fillStyle = "#ea80b0";
                  context.fill();
                  // create the image
                  var image = new Image();
                  image.src = canvas.toDataURL();
                  return image;
              })();

              // render that thing!
              function render() {
                  // next animation frame
                  requestAnimationFrame(render);

                  // update time
                  var newTime = new Date().getTime() / 1000,
                      deltaTime = newTime - (time || newTime);
                  time = newTime;

                  // clear canvas
                  context.clearRect(0, 0, canvas.width, canvas.height);

                  // create new particles
                  var amount = particleRate * deltaTime;
                  for (var i = 0; i < amount; i++) {
                      var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
                      var dir = pos.clone().length(settings.particles.velocity);
                      particles.add(
                          canvas.width / 2 + pos.x,
                          canvas.height / 2 - pos.y,
                          dir.x,
                          -dir.y
                      );
                  }

                  // update and draw particles
                  particles.update(deltaTime);
                  particles.draw(context, image);
              }

              // handle (re-)sizing of the canvas
              function onResize() {
                  canvas.width = canvas.clientWidth;
                  canvas.height = canvas.clientHeight;
              }
              window.onresize = onResize;

              // delay rendering bootstrap
              setTimeout(function () {
                  onResize();
                  render();
              }, 10);
          })(document.getElementById("pinkboard"));
      </script>
  </body>
</html>
